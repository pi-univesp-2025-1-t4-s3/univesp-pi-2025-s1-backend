# [Link do backend da nuvem](https://inarisys.koyeb.app/)

# Projeto Univesp PI 2025 S1 - Backend

Este projeto √© o backend da aplica√ß√£o desenvolvida para o Projeto Integrador da Univesp (Turma 2025 S1).

---

## ‚úÖ Pr√©-requisitos

- Java 17 ou superior
- Maven (ou usar o `mvnw.cmd` que j√° vem no projeto)
- PostgreSQL
- Make (em ambientes Windows, recomenda-se o uso via Git Bash, WSL ou Make para Windows)

---

## ‚öôÔ∏è Configura√ß√£o do banco de dados

1. Suba uma inst√¢ncia do PostgreSQL localmente. Exemplo com Docker:

   ```bash
   docker run --name postgres-inarisys \
     -e POSTGRES_DB=inarisys \
     -e POSTGRES_USER=postgres \
     -e POSTGRES_PASSWORD=postgres \
     -p 5432:5432 \
     -d postgres:15
   ```

2. No projeto, edite o arquivo `src/main/resources/application-local.properties` para apontar para sua inst√¢ncia do banco. Exemplo:

   ```properties
   spring.datasource.url=jdbc:postgresql://localhost:5432/postgres
   spring.datasource.username=postgres
   spring.datasource.password=postgres
   spring.datasource.driver-class-name=org.postgresql.Driver
   ```

---

## üóÉÔ∏è Carga do banco (schema e dados iniciais)

1. Conecte-se ao banco `inarisys` criado no passo anterior.

2. Execute os arquivos localizados em `src/main/resources`:

    - `schema.sql` ‚Üí cria as tabelas do sistema
    - `data.sql` ‚Üí insere os perfis e o usu√°rio admin

Voc√™ pode usar pgAdmin, DBeaver, psql ou qualquer outro cliente de banco de dados.

---

## ‚ñ∂Ô∏è Rodando o projeto localmente

Para rodar o projeto com o profile `local`, execute no terminal:

```bash
make run
```

Esse comando faz:
- Build do projeto com Maven
- Gera√ß√£o do `.jar`
- Execu√ß√£o com o profile `local`

---

## üîê Login padr√£o

- **Email:** `admin`
- **Senha:** `admininarisys2025`

---

## üõ†Ô∏è Comandos √∫teis

```bash
make            # build + run com profile local
make build      # apenas compila o projeto
make clean      # limpa os arquivos gerados pelo Maven
```

---

## üìÇ Estrutura do projeto

- `src/main/java`: c√≥digo fonte da aplica√ß√£o
- `src/main/resources/schema.sql`: DDL com as tabelas do banco
- `src/main/resources/data.sql`: DML com dados iniciais
- `Makefile`: comandos automatizados para build e execu√ß√£o

---

## üß™ Testes com curl

### üîë Login

```bash
curl --location 'http://localhost:8080/auth/login' \
  --header 'Content-Type: application/json' \
  --data '{"email":"admin","senha":"admininarisys2025"}'
```

Isso retorna um token JWT. Copie ele para testar a autentica√ß√£o nos endpoints protegidos.

### ‚úÖ Teste de endpoint autenticado

```bash
curl --location 'http://localhost:8080/hello' \
  --header 'Content-Type: application/json' \
  --header 'Authorization: Bearer <SEU_TOKEN_JWT_AQUI>'
```

* Substitua `<SEU_TOKEN_JWT_AQUI>` pelo token retornado no login.

Se tudo funcionar, deve ser retornada a mensagem `Univesp - PI 2025 S1 - T4 S3`
